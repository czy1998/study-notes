# 注意要点

## 父子组件生命周期执行顺序

```js
import React, { useEffect，useLayoutEffect } from 'react'

export default function App() {
    useEffect(() => {
        console.log('F: useEffect')
    }, [])
    useLayoutEffect(()=>{
        console.log('F: useLayoutEffect')
    })
    Promise.resolve().then(() => {
        console.log("F: microTask", count);
    });
    console.log('F: render')
    return (
        <div>
            <Demo />
        </div>
    )
}
const Demo = () => {
    useEffect(() => {
        console.log('C: useEffect')
    }, [])
    useLayoutEffect(()=>{
        console.log('C: useLayoutEffect')
    })
    console.log('C: render')
    return <div>123</div>
}
```

打印结果顺序如下:

```js
// F: render
// C: render
// C: useLayoutEffect
// F: useLayoutEffect
// F: microTask
// C: useEffect
// F: useEffect
```

### 参考资料

- [运行案例](https://codesandbox.io/p/sandbox/test-useevent-ce8c1r?file=%2Fsrc%2FApp.js%3A38%2C3-40%2C6)
- [React useEvent RFC 细节分析：为何 useLayoutEffect 仍然不符合预期](https://juejin.cn/post/7103105521288232997)
