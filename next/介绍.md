# 介绍

Next.js 是一个基于 React 全栈框架，由 Vercel 开发和维护，那么它有什么优势呢？

- **SSR**: 服务端渲染，可以提高页面加载速度(现在会 SSR 的人才并不多，可以提升你的竞争力)
- **SSG**: 静态站点生成，可以生成静态页面，类似于 Vitepress / Astro 等静态站点生成工具
- **SEO**: Next.js 提供了 SEO 优化，让你的网站更容易被搜索引擎收录
- **AI:** Vercel 提供了 AI SDK 可以跟 Next.js 轻松结合，让你可以轻松实现 AI 应用
- **服务端操作**: Next.js 提供了服务端操作，顺便学习服务端知识，为以后做全栈开发打下基础
- **社区丰富**: Next.js 拥有庞大的社区，可以让你轻松找到解决方案
- **部署:** 支持多种部署选项，与 Vercel 等平台集成良好，可以快速部署

## 什么是 React Compiler?

React Compiler 是 Next.js 用于自动优化组件渲染来提高性能的工具，在之前的话，我们需要手动优化 `useMemo` / `useCallback` / `memo` 等，现在 Next.js 会自动优化，你只需要写代码即可,减少心智负担。

如何开启 React Compiler? `如果你在选项中选择 yes 则无需安装（通过脚手架初始化项目时选择 yes）`

```bash
npm install -D babel-plugin-react-compiler

```

next.config.ts

```ts
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  reactCompiler: true, //开启即可
};

export default nextConfig;
```

## 什么是 App Router?

Next.js 有两套路由系统，一个是旧的 `Pages Router` 路由系统，一个是新的 `App Router` 路由系统。

首先 Next.js 首推的是 `App Router` 路由系统

- `Pages Router` 的路由系统是会把 `pages` 目录下的所有 jsx/tsx 文件，都转换成路由，例如 `pages/index.tsx` 会转换成 `/` 路由，`pages/about.tsx` 会转换成 `/about` 路由，这样导致我们不能把组件写到 `pages` 目录下

目录结构如下

```txt
 └── pages
    ├── index.tsx -> /
    ├── login.tsx -> /login
    ├── api
    │   └── user.tsx -> /api/user
    ├── posts
    │   └── [id].tsx -> /posts/[id]
    └── blog
        ├── index.tsx -> /blog
        └── setting.tsx -> /blog/setting

```

- `App Router` 的路由系统是根据约定定义的，app 目录下的每个文件夹都代表一个路由段（route segment），并直接映射到 URL 路径。无需配置路由表，框架会根据您的文件结构自动处理，目录结构如下

```txt
src/
└── app
    ├── page.tsx -> / 首页
    ├── layout.tsx -> 布局组件
    ├── template.tsx -> 模板组件
    ├── loading.tsx -> 加载组件
    ├── error.tsx -> 错误组件
    └── not-found.tsx -> 404组件
    ├── xiaoman
    │   └── page.tsx -> /xiaoman 小满页面
    └── daman
        └── page.tsx -> /daman 大满页面

```

- `Pages Router` 读取数据需要使用 `getServerSideProps` / `getStaticProps` / `getStaticPaths` 等函数，而 `App Router` 则不需要，直接在组件中使用 `fetch` 调用即可。

Pages Router:

```tsx
export async function getServerSideProps() {
  const res = await fetch("xxx");
  const data = await res.json();
  return { props: { data } };
}
export default function Home({ data }) {
  return <div>{data.name}</div>;
}
```

App Router:

```tsx
export default async function Home() {
  const res = await fetch("xxx");
  const data = await res.json();
  return <div>{data.name}</div>;
}
```

### layout && template

`layout(布局)` 布局是多个页面共享 UI，例如导航栏、侧边栏、底部等。
`template(模板)` 基本功能跟布局一样，只是不会保存状态

布局和模板的特点就是：

- **布局嵌套**: 支持多层布局嵌套，构建复杂的页面结构
- **状态管理**: 布局会在页面切换时保持状态，而模板会重新渲染
- **根布局**: app/layout.tsx 是必须存在的根布局文件
- **渲染顺序**: 当布局和模板同时存在时，渲染顺序为 layout → template → page
